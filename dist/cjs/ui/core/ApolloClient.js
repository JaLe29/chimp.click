"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var ApolloClient=_interopDefault(require("apollo-client")),apolloLinkHttp=require("apollo-link-http"),apolloCacheInmemory=require("apollo-cache-inmemory"),apolloLinkContext=require("apollo-link-context"),apolloLinkWs=require("apollo-link-ws"),apolloLink=require("apollo-link"),apolloUtilities=require("apollo-utilities");function _defineProperty(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function ownKeys(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,t)}return r}function _objectSpread2(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(r),!0).forEach((function(o){_defineProperty(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}var HOST="suite.chimp.click",uri=function(e){return"".concat(e,"://").concat(HOST,"/graphql")};function apolloClient(e){var o=apolloLinkHttp.createHttpLink({uri:uri("http".concat("s"))}),r=new apolloLinkWs.WebSocketLink({uri:uri("ws".concat("s")),options:{lazy:!0,reconnect:!0,connectionParams:function(){return{headers:{authorization:e}}}}}),t=apolloLinkContext.setContext((function(o,r){return{headers:_objectSpread2({},r.headers,{authorization:e}),onError:function(e){var o=e.graphQLErrors,r=e.networkError;o&&console.error(o),r&&console.error("[Network error]: ".concat(r))}}}));return new ApolloClient({link:apolloLink.split((function(e){var o=e.query,r=apolloUtilities.getMainDefinition(o);return"OperationDefinition"===r.kind&&"subscription"===r.operation}),r,t.concat(o)),cache:new apolloCacheInmemory.InMemoryCache})}exports.default=apolloClient;
